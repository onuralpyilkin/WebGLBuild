<!DOCTYPE html>
<html>
<head>
    <title>Login</title>
</head>
<body>
    <h1>Login</h1>
    <form id="loginForm">
        <label for="nickname">Kullanıcı Adı:</label>
        <input type="text" id="nickname" name="nickname"><br><br>
        <label for="password">Parola:</label>
        <input type="password" id="password" name="password"><br><br>
        <button type="button" id="loginButton">Giriş Yap</button>
    </form>

    <script>
        // Form elemanlarını al
        const loginForm = document.getElementById("loginForm");
        const nicknameInput = document.getElementById("nickname");
        const passwordInput = document.getElementById("password");
        const loginButton = document.getElementById("loginButton");

        // API URL'sini belirle (kendi API URL'nizi buraya ekleyin)
        const apiUrl = "https://aris888.com/api/auth/login";

        // Login butonuna tıklanınca
        loginButton.addEventListener("click", async () => {
            // Kullanıcı adı ve parola bilgilerini al
            const nickname = nicknameInput.value;
            const password = passwordInput.value;

            // POST isteği için gerekli verileri hazırla
            const data = {
                nickname: nickname,
                password: password
            };

            // POST isteği gönder
            try {
                const response = await fetch(apiUrl, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(data)
                });

                if (response.ok) {
                    // Başarılı bir yanıt alındığında JSON verisini al
                    const json = await response.json();

                    // Token değerini al
                    const token = json.token;

                    // Yönlendirme URL'sini oluştur
                    const redirectUrl = "https://onuralpyilkin.github.io/WebGLBuild?token=" + token;

                    // Kullanıcıyı yönlendir
                    window.location.href = redirectUrl;
                } else {
                    alert("Giriş başarısız. Lütfen tekrar deneyin.");
                }
            } catch (error) {
                console.error("Hata oluştu: " + error);
            }
        });
    </script>
</body>
</html>